<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <h3> ğŸ± ì‹ ê·œ ë©”ë‰´ ë“±ë¡ í¼ ğŸ±</h3>
    <form action="/menu/regist" method="post">
        <label>ë©”ë‰´ ì´ë¦„ : <input type="text" name="name"></label><br>
        <label>ë©”ë‰´ ê°€ê²© : <input type="number" name="price" step="1000" min="0"></label><br>
        <label>ì¹´í…Œê³ ë¦¬ ì½”ë“œ : </label>
        <select name="categoryCode" id="categoryCode"></select><br>
        <!-- optionì€ ë§Œë“¤ì§€ ì•ŠìŒ, ì´ìœ  : ì¶”ê°€ í•  ë•Œë§ˆë‹¤ option ì„¤ì •ì„ í•´ì•¼í•˜ë¯€ë¡œ-->

        <label>íŒë§¤ ìƒíƒœ : </label>
        <select name="orderableStatus">
            <option value="Y">Y</option>
            <option value="N">N</option>
        </select><br>
        <input type="submit" value="ì „ì†¡">
    </form>
    <script>
        /* comment. ë¹„ë™ê¸°ì²˜ë¦¬ (ì‹ ê·œ ë“±ë¡ê³¼ 'ë™ì‹œì—' ì¹´í…Œê³ ë¦¬ ì½”ë“œë„ ì¡°íšŒí•´ì•¼ í•œë‹¤.)
                    í™”ë©´ì´ ë¡œë”©ë  ë•Œ ë¯¸ë¦¬ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ í™”ë©´ì— ë¿Œë ¤ì¤Œ. */
        /* comment. fecthë€ ê°•ì œë¡œ ì¡ì•„ ì±„ë‹¤ë¼ëŠ” ëœ» */
        /* comment.
            fetchëŠ” regist.html í˜ì´ì§€ê°€ ìš”ì²­ë˜ëŠ” ìˆœê°„ ë™ì‘ì„ í•œë‹¤.
            ì¦‰, ë¬¼ë¦¬ì ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ê±°ë‚˜, í˜ì´ì§€ ì´ë™ ë“±ì˜ ì‘ì—…ì„ í•˜ì§€ ì•Šì•„ë„
            ìš”ì²­ì„ ë³´ë‚¸ë‹¤ëŠ” ì˜ë¯¸.
            /menu/category ìš”ì²­ì´ ëë‚˜ë©´ ëŒì•„ì˜¤ëŠ” ê°’ì€ json í˜•ì‹ì˜ ë¬¸ìì—´ ë°ì´í„°
            ex) {code : 3, name : í•œì‹}
            ë”°ë¼ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¡œì¨ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë¬¸ìì—´ ë°ì´í„°ë¥¼
            ê°ì²´ í˜•íƒœë¡œ ë³€í™˜í•´ì•¼ í•œë‹¤. */

        //  ë­”ê°€ë¥¼ í•˜ì§€ ì•Šì•„ë„(ë²„íŠ¼ í´ë¦­) categoryì˜ ë°ì´í„°ë¥¼ ì•Œì•„ì„œ ë¯¸ë¦¬ ê°€ì ¸ì˜´.
        fetch("/menu/category") // ë°ì´í„° ë©ì–´ë¦¬ë¼ê³  ìƒê°
        // then êµ¬ë¬¸ : json í˜•ì‹ì˜ ë¬¸ìì—´ ê°’ì„ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
            .then(res => res.json()) // ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì¸ res ë³€ìˆ˜ì— ë°ì´í„°ê°€ ë“¤ì–´ê°€ìˆìŒ.
            // .then(res => res.json()) â†’ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë³€í™˜ ì™„ë£Œ

            .then(data => { // ë³€í™˜ëœ ë°ì´í„°ê°€ data ë³€ìˆ˜ì— ë‹´ê¹€
                console.log(data); // í™•ì¸ìš© ì¶œë ¥
                // select íƒœê·¸ ê°€ì ¸ì˜´.
                const $categoryCode = document.getElementById("categoryCode"); // dom ìš”ì†Œ ì·¨ë“

                // for in ë°˜ë³µë¬¸ : ë³€ìˆ˜ì— dataì— ìˆëŠ” í”„ë¡œí¼í‹° í‚¤ ëŒ€ì…
                for(let index in data) { // dataë¥¼ indexì— ë‹´ì•„ì¤Œ. (0 ~ n key ê°’ì„ indexì— ì‚½ì…)
                    const $option = document.createElement("option"); // ì˜µì…˜ íƒœê·¸ ìƒì„±
                    $option.value = data[index].code; // value ì„¤ì •
                    $option.textContent = data[index].name;
                    // ë§ˆì§€ë§‰ìœ¼ë¡œ select íƒœê·¸ì— ìì‹ìœ¼ë¡œ ë¶™ì—¬ ë†“ê¸°
                    $categoryCode.appendChild($option);
                }
            })
    </script>
</body>
</html>